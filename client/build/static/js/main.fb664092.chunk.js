(this.webpackJsonpjwt_blog=this.webpackJsonpjwt_blog||[]).push([[0],{1468:function(e,t,a){"use strict";a.r(t);var c=a(6),n=a(2),r=a.n(n),s=a(22),i=a.n(s),l=a(3),o=a.n(l),d=a(5),u=a(23),m=a.n(u).a.create({baseURL:"/api"});m.interceptors.request.use((function(e){if(localStorage.getItem("profile")){var t=JSON.parse(localStorage.getItem("profile")).token;e.headers.Authorization="Bearer ".concat(t)}return e}));var j=function(e){return m.post("/user",e)},b=function(e){return m.post("/article?_method=delete",{nanoID:e})},x=function(e){return m.get("/comment/".concat(e))},p=function(e){return m.post("/comment",e)},h=a(4),v=a.n(h),f=function(){var e=Object(d.a)(o.a.mark((function e(t,a){var c,n,r,s,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=v.a.name.firstName()+" "+v.a.name.lastName(),n=v.a.image.people()+"?random="+Date.now(),r=v.a.lorem.sentence(),s={name:c,avatar:n,description:r},e.prev=4,e.next=7,j(s);case 7:i=e.sent,"success"===(l=i.data).type&&t({user:s,token:l.token}),localStorage.setItem("profile",JSON.stringify({user:s,token:l.token})),a([l.flashMessage,l.type]),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(o.a.mark((function e(t,a,c){var n,r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/article");case 3:if(n=e.sent,"success"===(r=n.data).type&&t(r.articles),null===a){e.next=12;break}return e.next=9,x(a.nanoID);case 9:s=e.sent,i=s.data,c(i.comments);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a,c){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(o.a.mark((function e(t,a){var c,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return a(["not login yet","danger"]),e.abrupt("return");case 3:return e.prev=3,c={title:v.a.lorem.sentence(),author:t.user.name,description:v.a.lorem.paragraph(),content:v.a.lorem.paragraphs(),comment:0,like:0,dislike:0},e.next=7,s=c,m.post("/article",s);case 7:n=e.sent,r=n.data,a([r.flashMessage,r.type]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}var s}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(o.a.mark((function e(t,a,c){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t.nanoID);case 3:n=e.sent,r=n.data,a(t),c(r.comments),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,c){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(o.a.mark((function e(t,a,c){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t);case 3:n=e.sent,r=n.data,a([r.flashMessage,r.type]),c(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,c){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(o.a.mark((function e(t,a,c){var n,r,s,i,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return c(["not login yet","danger"]),e.abrupt("return");case 3:return e.prev=3,n=v.a.lorem.sentence(),r=a.user.name,s=Math.random()<.5,i={articleID:t,comment:n,author:r,like:s},e.next=10,p(i);case 10:l=e.sent,d=l.data,c([d.flashMessage,d.type]),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,a,c){return e.apply(this,arguments)}}(),w=a(0),I=function(e){var t=e.login,a=e.logout,c=e.user;return c?Object(w.jsx)("div",{className:"mt-3",children:Object(w.jsxs)("div",{className:"card",children:[Object(w.jsx)("img",{alt:"user_img",src:c.user.avatar}),Object(w.jsxs)("div",{className:"card-body",children:[Object(w.jsx)("div",{className:"card-title",children:c.user.name}),Object(w.jsx)("div",{className:"card-text",children:c.user.description})]}),Object(w.jsx)("button",{className:"btn btn-primary",onClick:a,children:"Logout"})]})}):Object(w.jsx)("div",{className:"container",children:Object(w.jsx)("button",{className:"btn btn-primary",onClick:t,children:"Login"})})},D=function(e){var t=e.articlePost,a=(e.user,e.articles),c=e.toArticle,n=e.deletePost;return Object(w.jsxs)("div",{className:"mt-3",children:[Object(w.jsx)("div",{className:"mb-3",children:Object(w.jsx)("button",{className:"btn btn-primary",onClick:t,children:"New Post"})}),Object(w.jsx)("div",{className:"mb-3",children:a.map((function(e){return Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)("div",{className:"card-body",children:[Object(w.jsxs)("div",{className:"card-title",children:["Title : ",e.title]}),Object(w.jsxs)("div",{className:"card-text",children:["Date : ",e.date]}),Object(w.jsxs)("div",{className:"card-text",children:["Author : ",e.author]}),Object(w.jsxs)("div",{className:"card-text",children:["Description : ",e.description]}),Object(w.jsxs)("div",{className:"card-text",children:["Comment : ",e.comment," Like : ",e.like," Dislike : ",e.dislike]}),Object(w.jsx)("div",{className:"btn btn-success mt-3",onClick:function(){c(e)},children:" Read "}),Object(w.jsx)("div",{className:"btn btn-danger mt-3",onClick:function(){n(e.nanoID)},children:" Delete "})]})},e.nanoID)}))})]})},S=function(e){var t=e.comments,a=e.article,c=e.addComment;return Object(w.jsxs)("div",{className:"",children:[Object(w.jsx)("h1",{className:"mt-3 mb-3",children:"Selected Article"}),Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)("div",{className:"card-body",children:[Object(w.jsxs)("div",{className:"card-title",children:["Title : ",a.title]}),Object(w.jsxs)("div",{className:"card-text mt-1",children:["Date : ",a.date]}),Object(w.jsxs)("div",{className:"card-text mt-1",children:["Author : ",a.author]}),Object(w.jsxs)("div",{className:"card-text mt-3",children:["Content : ",a.content]}),Object(w.jsx)("div",{className:"card-text"}),Object(w.jsx)("div",{className:"btn btn-success mt-3 mb-3",onClick:function(){c(a.nanoID)},children:"Add comment"}),t.map((function(e){return Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)("div",{className:"card-body",children:[Object(w.jsxs)("div",{className:"card-title",children:["Author : ",e.author]}),Object(w.jsxs)("div",{className:"card-text",children:["Date: ",e.date]}),e.like?Object(w.jsx)("div",{className:"card-text",children:"LIKE"}):Object(w.jsx)("div",{className:"card-text",children:"DISLIKE"}),Object(w.jsxs)("div",{className:"card-text",children:["Comment : ",e.comment]})]})},e.nanoID)}))]})})]})},C=function(){var e=r.a.useState([]),t=Object(c.a)(e,2),a=t[0],n=t[1],s=r.a.useState(null),i=Object(c.a)(s,2),l=i[0],o=i[1],d=r.a.useState([]),u=Object(c.a)(d,2),m=u[0],j=u[1],b=r.a.useState(null),x=Object(c.a)(b,2),p=x[0],h=x[1],v=r.a.useState([]),C=Object(c.a)(v,2),A=C[0],L=C[1];r.a.useEffect((function(){o(localStorage.getItem("profile")?JSON.parse(localStorage.getItem("profile")):null)}),[]),r.a.useEffect((function(){O(j,p,L)}),[a,p]);return Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("div",{className:"row",children:""===a[0]?null:Object(w.jsx)("div",{className:"alert alert-".concat(a[1]," mt-3"),children:a[0]})}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col",style:{maxWidth:"400px"},children:Object(w.jsx)(I,{login:function(){f(o,n)},logout:function(){!function(e,t){e(null),localStorage.removeItem("profile"),t(["logout success","success"])}(o,n)},user:l})}),Object(w.jsx)("div",{className:"col",children:Object(w.jsx)(D,{articles:m,user:l,articlePost:function(){N(l,n)},toArticle:function(e){g(e,h,L)},deletePost:function(e){k(e,n,h)}})}),Object(w.jsx)("div",{className:"col",children:null===p?null:Object(w.jsx)(S,{article:p,comments:A,addComment:function(e){y(e,l,n)}})})]})]})};i.a.render(Object(w.jsx)(C,{}),document.getElementById("root"))}},[[1468,1,2]]]);
//# sourceMappingURL=main.fb664092.chunk.js.map