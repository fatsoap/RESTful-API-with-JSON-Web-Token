{"version":3,"sources":["api/index.js","controller/controller.js","components/User.js","components/Articles.js","components/Article.js","index.js"],"names":["API","axios","create","baseURL","interceptors","request","use","req","localStorage","getItem","token","JSON","parse","headers","Authorization","login","user","post","deleteArticle","nanoID","getComments","get","postComment","comment","setUser","setFlashMessage","a","name","faker","firstName","lastName","avatar","image","people","Date","now","description","lorem","sentence","data","type","setItem","stringify","flashMessage","console","log","getArticle","setArticles","selectedArticle","setComments","articles","comments","postArticle","article","paragraph","paragraphs","newPost","selectArticle","setSelectedArticle","articleID","author","like","Math","random","User","logout","className","alt","src","onClick","Articles","articlePost","toArticle","deletePost","map","title","date","dislike","Article","addComment","content","App","React","useState","useEffect","controller","style","maxWidth","removeItem","ReactDOM","render","document","getElementById"],"mappings":"yLAEMA,E,OAAMC,EAAMC,OAAO,CAAEC,QAAS,SAEpCH,EAAII,aAAaC,QAAQC,KAAI,SAAAC,GACzB,GAAGC,aAAaC,QAAQ,WAAY,CAChC,IAAIC,EAAQC,KAAKC,MAAMJ,aAAaC,QAAQ,YAAYC,MAExDH,EAAIM,QAAQC,cAAZ,iBAAsCJ,GAI1C,OAAOH,KAIJ,IAAMQ,EAAQ,SAACC,GAAD,OAAUhB,EAAIiB,KAAK,QAASD,IAMpCE,EAAgB,SAACC,GAAD,OAAYnB,EAAIiB,KAAK,0BAA2B,CAAEE,YAElEC,EAAc,SAACD,GAAD,OAAYnB,EAAIqB,IAAJ,mBAAoBF,KAE9CG,EAAc,SAACC,GAAD,OAAavB,EAAIiB,KAAK,WAAYM,I,gBCbhDR,EAAK,uCAAG,WAAOS,EAASC,GAAhB,yBAAAC,EAAA,6DACbC,EAAOC,IAAMD,KAAKE,YAAc,IAAMD,IAAMD,KAAKG,WACjDC,EAASH,IAAMI,MAAMC,SAAW,WAAaC,KAAKC,MAClDC,EAAcR,IAAMS,MAAMC,WAC1BtB,EAAO,CACPW,OACAI,SACAK,eAPa,kBAUUpC,EAAUgB,GAVpB,gBAWI,aADTuB,EAVK,EAULA,MACAC,MACJhB,EAAQ,CAAER,OAAMN,MAAO6B,EAAK7B,QAGhCF,aAAaiC,QAAQ,UAAW9B,KAAK+B,UAAU,CAAE1B,OAAMN,MAAO6B,EAAK7B,SAEnEe,EAAgB,CAACc,EAAKI,aAAcJ,EAAKC,OAjB5B,kDAoBbI,QAAQC,IAAR,MApBa,0DAAH,wDA8BLC,EAAU,uCAAG,WAAOC,EAAaC,EAAiBC,GAArC,qBAAAvB,EAAA,+EDzBM1B,EAAIqB,IAAI,YCyBd,mBAGD,aADTkB,EAFU,EAEVA,MACAC,MACJO,EAAYR,EAAKW,UAEE,OAApBF,EANe,iCAOShD,EAAgBgD,EAAgB7B,QAPzC,gBAONoB,EAPM,EAONA,KACRU,EAAYV,EAAKY,UARH,0DAWlBP,QAAQC,IAAR,MAXkB,0DAAH,0DAgBVO,EAAW,uCAAG,WAAOpC,EAAMS,GAAb,mBAAAC,EAAA,yDACnBV,EADmB,uBAEnBS,EAAgB,CAAC,gBAAiB,WAFf,0CAMf4B,EAAU,CACV,MAASzB,IAAMS,MAAMC,WACrB,OAAUtB,EAAKA,KAAKW,KACpB,YAAeC,IAAMS,MAAMiB,YAC3B,QAAW1B,IAAMS,MAAMkB,aACvB,QAAW,EACX,KAAQ,EACR,QAAW,GAbI,SDvCCC,ECsDmBH,EDtDPrD,EAAIiB,KAAK,WAAYuC,GCuClC,gBAeXjB,EAfW,EAeXA,KACRd,EAAgB,CAACc,EAAKI,aAAcJ,EAAKC,OAhBtB,kDAkBnBI,QAAQC,IAAR,MAlBmB,kCDvCA,IAACW,ICuCD,qBAAH,wDAsBXC,EAAa,uCAAG,WAAOJ,EAASK,EAAoBT,GAApC,iBAAAvB,EAAA,+EAEE1B,EAAgBqD,EAAQlC,QAF1B,gBAEboB,EAFa,EAEbA,KACRmB,EAAmBL,GACnBJ,EAAYV,EAAKY,UAJI,gDAMrBP,QAAQC,IAAR,MANqB,yDAAH,0DAWb3B,EAAa,uCAAG,WAAOC,EAAQM,EAAiBiC,GAAhC,iBAAAhC,EAAA,+EAEE1B,EAAkBmB,GAFpB,gBAEboB,EAFa,EAEbA,KACRd,EAAgB,CAACc,EAAKI,aAAcJ,EAAKC,OACzCkB,EAAmB,MAJE,gDAMrBd,QAAQC,IAAR,MANqB,yDAAH,0DAWbvB,EAAW,uCAAG,WAAOqC,EAAW3C,EAAMS,GAAxB,yBAAAC,EAAA,yDACnBV,EADmB,uBAEnBS,EAAgB,CAAC,gBAAiB,WAFf,0CAMfa,EAAWV,IAAMS,MAAMC,WACvBsB,EAAS5C,EAAKA,KAAKW,KACnBkC,EAASC,KAAKC,SAAW,GACzBxC,EAAU,CAAEoC,YAAWpC,QAASe,EAAUsB,SAAQC,QATnC,UAUI7D,EAAgBuB,GAVpB,iBAUXgB,EAVW,EAUXA,KACRd,EAAgB,CAACc,EAAKI,aAAcJ,EAAKC,OAXtB,kDAanBI,QAAQC,IAAR,MAbmB,0DAAH,0D,OCzETmB,EA5BF,SAAC,GAA4B,IAA1BjD,EAAyB,EAAzBA,MAAOkD,EAAkB,EAAlBA,OAAQjD,EAAU,EAAVA,KAE3B,OAAGA,EAEK,qBAAKkD,UAAU,OAAf,SACI,sBAAKA,UAAU,OAAf,UACI,qBAAKC,IAAI,WAAWC,IAAKpD,EAAKA,KAAKe,SACnC,sBAAKmC,UAAU,YAAf,UACI,qBAAKA,UAAU,aAAf,SACKlD,EAAKA,KAAKW,OAEf,qBAAKuC,UAAU,YAAf,SACKlD,EAAKA,KAAKoB,iBAGnB,wBAAQ8B,UAAU,kBAAkBG,QAASJ,EAA7C,yBAMR,qBAAKC,UAAU,YAAf,SACI,wBAAQA,UAAU,kBAAkBG,QAAStD,EAA7C,sBCqBDuD,EA3CE,SAAC,GAA4D,IAA1DC,EAAyD,EAAzDA,YAAmBrB,GAAsC,EAA5ClC,KAA4C,EAAtCkC,UAAUsB,EAA4B,EAA5BA,UAAWC,EAAiB,EAAjBA,WA8BxD,OACI,sBAAKP,UAAU,OAAf,UACI,qBAAKA,UAAU,OAAf,SACI,wBAAQA,UAAU,kBAAkBG,QAASE,EAA7C,wBAEJ,qBAAKL,UAAU,OAAf,SAhCGhB,EAASwB,KAAI,SAACrB,GACjB,OACI,qBAA0Ba,UAAU,OAApC,SACI,sBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAU,aAAf,qBACab,EAAQsB,SAErB,sBAAKT,UAAU,YAAf,oBACYb,EAAQuB,QAEpB,sBAAKV,UAAU,YAAf,sBACcb,EAAQO,UAEtB,sBAAKM,UAAU,YAAf,2BACmBb,EAAQjB,eAE3B,sBAAK8B,UAAU,YAAf,uBACeb,EAAQ9B,QADvB,WACwC8B,EAAQQ,KADhD,cACiER,EAAQwB,WAEzE,qBAAKX,UAAU,uBAAwBG,QAAS,WAAKG,EAAUnB,IAA/D,oBACA,qBAAKa,UAAU,sBAAuBG,QAAS,WAAKI,EAAWpB,EAAQlC,SAAvE,0BAlBEkC,EAAQlC,iBC+BnB2D,EApCC,SAAC,GAAuC,IAArC3B,EAAoC,EAApCA,SAAUE,EAA0B,EAA1BA,QAAS0B,EAAiB,EAAjBA,WAiBlC,OACI,sBAAKb,UAAU,GAAf,UACI,oBAAIA,UAAU,YAAd,8BACA,qBAAKA,UAAU,OAAf,SACI,sBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAU,aAAf,qBAAqCb,EAAQsB,SAC7C,sBAAKT,UAAU,iBAAf,oBAAwCb,EAAQuB,QAChD,sBAAKV,UAAU,iBAAf,sBAA0Cb,EAAQO,UAClD,sBAAKM,UAAU,iBAAf,uBAA2Cb,EAAQ2B,WACnD,qBAAKd,UAAU,cACf,qBAAKA,UAAU,4BAA4BG,QAAS,WAAMU,EAAW1B,EAAQlC,SAA7E,yBAxBLgC,EAASuB,KAAI,SAACnD,GACjB,OACI,qBAA0B2C,UAAU,OAApC,SACI,sBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAU,aAAf,sBAAsC3C,EAAQqC,UAC9C,sBAAKM,UAAU,YAAf,mBAAkC3C,EAAQqD,QACzCrD,EAAQsC,KAAO,qBAAKK,UAAU,YAAf,kBAAwC,qBAAKA,UAAU,YAAf,qBACxD,sBAAKA,UAAU,YAAf,uBAAsC3C,EAAQA,eAL5CA,EAAQJ,oBCG5B8D,EAAM,WAAO,IAAD,EAE0BC,IAAMC,SAAS,IAFzC,mBAEPxC,EAFO,KAEOlB,EAFP,OAGUyD,IAAMC,SAAS,MAHzB,mBAGPnE,EAHO,KAGDQ,EAHC,OAIkB0D,IAAMC,SAAS,IAJjC,mBAIPjC,EAJO,KAIGH,EAJH,OAKgCmC,IAAMC,SAAS,MAL/C,mBAKPnC,EALO,KAKUU,EALV,OAMkBwB,IAAMC,SAAS,IANjC,mBAMPhC,EANO,KAMGF,EANH,KAQdiC,IAAME,WAAU,WACZ5D,EJdDhB,aAAaC,QAAQ,WACNE,KAAKC,MAAMJ,aAAaC,QAAQ,YAGvC,QIWR,IAEHyE,IAAME,WAAU,WACZC,EAAsBtC,EAAaC,EAAiBC,KACrD,CAACN,EAAcK,IA0BlB,OACI,sBAAKkB,UAAU,YAAf,UACI,qBAAKA,UAAU,MAAf,SACuB,KAAlBvB,EAAa,GAAS,KAAO,qBAAKuB,UAAS,sBAAiBvB,EAAa,GAA9B,SAAd,SAAwDA,EAAa,OAEvG,sBAAKuB,UAAU,MAAf,UACI,qBAAKA,UAAU,MAAMoB,MAAO,CAACC,SAAU,SAAvC,SACI,cAAC,EAAD,CAAMxE,MA/BR,WACVsE,EAAiB7D,EAASC,IA8BMwC,OA3BrB,YJOG,SAACzC,EAASC,GAC5BD,EAAQ,MACRhB,aAAagF,WAAW,WACxB/D,EAAgB,CAAC,iBAAkB,YIT/B4D,CAAkB7D,EAASC,IA0BqBT,KAAMA,MAE9C,qBAAKkD,UAAU,MAAf,SACI,cAAC,EAAD,CAAUhB,SAAUA,EAAUlC,KAAMA,EAAMuD,YA1BtC,WAChBc,EAAuBrE,EAAMS,IAyBmD+C,UAtBlE,SAACnB,GACfgC,EAAyBhC,EAASK,EAAoBT,IAqBgDwB,WAlBvF,SAACtD,GAChBkE,EAAyBlE,EAAQM,EAAiBiC,QAmB1C,qBAAKQ,UAAU,MAAf,SAC0B,OAApBlB,EAA2B,KAAO,cAAC,EAAD,CAASK,QAASL,EAAiBG,SAAUA,EAAU4B,WAjBxF,SAACpB,GAChB0B,EAAuB1B,EAAW3C,EAAMS,eAyBhDgE,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.fb664092.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst API = axios.create({ baseURL: \"/api\" });\n\nAPI.interceptors.request.use(req => {\n    if(localStorage.getItem('profile')) {\n        var token = JSON.parse(localStorage.getItem('profile')).token;\n\n        req.headers.Authorization = `Bearer ${token}`;\n        \n    }\n\n    return req;\n})\n\n//login\nexport const login = (user) => API.post('/user', user);\n//getArticle\nexport const getArticle = () => API.get('/article');\n//postArticle\nexport const postArticle = (newPost) => API.post('/article', newPost );\n//deleteArticle\nexport const deleteArticle = (nanoID) => API.post('/article?_method=delete', { nanoID });\n//getComment\nexport const getComments = (nanoID) => API.get(`/comment/${nanoID}`);\n//postComment\nexport const postComment = (comment) => API.post('/comment', comment);\n","import * as API from '../api/index';\nimport faker from 'faker';\n\n\nexport const getUser = () => {\n    if(localStorage.getItem('profile')){\n        var oldUser = JSON.parse(localStorage.getItem('profile'));\n        return oldUser;\n    } else {\n        return null;\n    }\n}\n\nexport const login = async (setUser, setFlashMessage ) => {\n    var name = faker.name.firstName() + \" \" + faker.name.lastName();\n    var avatar = faker.image.people() + \"?random=\" + Date.now();\n    var description = faker.lorem.sentence();\n    var user = {\n        name,\n        avatar,\n        description,\n    };\n    try {\n        const { data } = await API.login(user);\n        if(data.type === 'success'){\n            setUser({ user, token: data.token });\n        }\n       \n        localStorage.setItem('profile', JSON.stringify({ user, token: data.token }));\n\n        setFlashMessage([data.flashMessage, data.type]);\n        \n    } catch(err) {\n        console.log(err);\n    }\n}\n\nexport const logout = (setUser, setFlashMessage) => {\n    setUser(null);\n    localStorage.removeItem('profile');\n    setFlashMessage([\"logout success\", \"success\"]);\n}\n\nexport const getArticle = async (setArticles, selectedArticle, setComments) => {\n    try {\n        const { data } = await API.getArticle();\n        if(data.type === 'success') {\n            setArticles(data.articles);\n        }\n        if(selectedArticle !== null){\n            const { data } = await API.getComments(selectedArticle.nanoID);\n            setComments(data.comments);\n        }\n    } catch (err) {\n        console.log(err);\n    }\n        \n}\n\nexport const postArticle = async (user, setFlashMessage) => {\n    if(!user){\n        setFlashMessage([\"not login yet\", \"danger\"]);\n        return;\n    }\n    try {\n        var article = {\n            \"title\": faker.lorem.sentence(),\n            \"author\": user.user.name,\n            \"description\": faker.lorem.paragraph(),\n            \"content\": faker.lorem.paragraphs(),\n            \"comment\": 0,\n            \"like\": 0,\n            \"dislike\": 0, \n        }\n        const { data } = await API.postArticle(article);\n        setFlashMessage([data.flashMessage, data.type]);\n    } catch(err) {\n        console.log(err);\n    }\n}\n\nexport const selectArticle = async (article, setSelectedArticle, setComments) => {\n    try {\n        const { data } = await API.getComments(article.nanoID);\n        setSelectedArticle(article);\n        setComments(data.comments);\n    } catch(err) {\n        console.log(err);\n    }\n    \n}\n\nexport const deleteArticle = async (nanoID, setFlashMessage, setSelectedArticle) => {\n    try {\n        const { data } = await API.deleteArticle(nanoID);\n        setFlashMessage([data.flashMessage, data.type]);\n        setSelectedArticle(null);\n    } catch(err) {\n        console.log(err);\n    }\n    \n}\n\nexport const postComment = async (articleID, user, setFlashMessage) => {\n    if(!user){\n        setFlashMessage([\"not login yet\", \"danger\"]);\n        return;\n    }\n    try {\n        var sentence = faker.lorem.sentence();\n        var author = user.user.name;\n        var like = ( Math.random() < 0.5 );\n        var comment = { articleID, comment: sentence, author, like};\n        const { data } = await API.postComment(comment);\n        setFlashMessage([data.flashMessage, data.type]);\n    } catch(err) {\n        console.log(err);\n    }\n}\n","import React from 'react';\n\nconst User = ({ login, logout, user}) => {\n\n    if(user) {\n        return(\n            <div className=\"mt-3\">\n                <div className=\"card\">\n                    <img alt=\"user_img\" src={user.user.avatar}></img>\n                    <div className=\"card-body\">\n                        <div className=\"card-title\">\n                            {user.user.name}\n                        </div>\n                        <div className=\"card-text\">\n                            {user.user.description}\n                        </div>\n                    </div>\n                    <button className=\"btn btn-primary\" onClick={logout} >Logout</button>\n                </div>\n            </div>\n        );\n    } else {\n        return(\n            <div className=\"container\">\n                <button className=\"btn btn-primary\" onClick={login} >Login</button>\n            </div>\n        )\n    }\n}\n\nexport default User;","import React from 'react';\n\nconst Articles = ({ articlePost, user, articles, toArticle, deletePost }) => {\n    \n    const renderArticles = () => {\n        return articles.map((article) => {\n            return(\n                <div key={article.nanoID} className=\"card\">\n                    <div className=\"card-body\">\n                        <div className=\"card-title\">\n                            Title : {article.title}\n                        </div>\n                        <div className=\"card-text\">\n                            Date : {article.date}\n                        </div>\n                        <div className=\"card-text\">\n                            Author : {article.author}\n                        </div>\n                        <div className=\"card-text\">\n                            Description : {article.description}\n                        </div>\n                        <div className=\"card-text\">\n                            Comment : {article.comment} Like : {article.like} Dislike : {article.dislike}\n                        </div>\n                        <div className=\"btn btn-success mt-3\"  onClick={()=>{toArticle(article)} } > Read </div>\n                        <div className=\"btn btn-danger mt-3\"  onClick={()=>{deletePost(article.nanoID)}} > Delete </div>\n                    </div>\n                </div>\n            );\n        })\n    }\n\n    return(\n        <div className=\"mt-3\">\n            <div className=\"mb-3\">\n                <button className=\"btn btn-primary\" onClick={articlePost}>New Post</button>\n            </div>\n            <div className=\"mb-3\">\n                {renderArticles()}\n            </div>\n            \n        </div>\n    );\n}\n\nexport default Articles;","import React from 'react';\r\n\r\nconst Article = ({ comments, article, addComment }) => {\r\n\r\n    const renderComments = () => {\r\n        return comments.map((comment) => {\r\n            return(\r\n                <div key={comment.nanoID} className=\"card\">\r\n                    <div className=\"card-body\">\r\n                        <div className=\"card-title\">Author : {comment.author}</div>\r\n                        <div className=\"card-text\">Date: {comment.date}</div>\r\n                        {comment.like ? <div className=\"card-text\">LIKE</div> : <div className=\"card-text\">DISLIKE</div>}\r\n                        <div className=\"card-text\">Comment : {comment.comment}</div>                        \r\n                    </div>\r\n                </div>\r\n            );\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div className=\"\">\r\n            <h1 className=\"mt-3 mb-3\" >Selected Article</h1>\r\n            <div className=\"card\">\r\n                <div className=\"card-body\">\r\n                    <div className=\"card-title\">Title : {article.title}</div>\r\n                    <div className=\"card-text mt-1\">Date : {article.date}</div>\r\n                    <div className=\"card-text mt-1\">Author : {article.author}</div>\r\n                    <div className=\"card-text mt-3\">Content : {article.content}</div>\r\n                    <div className=\"card-text\"></div>\r\n                    <div className=\"btn btn-success mt-3 mb-3\" onClick={()=>{ addComment(article.nanoID) }}>Add comment</div>\r\n                    {renderComments()}\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Article;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as controller from './controller/controller';\n\nimport User from './components/User';\nimport Articles from './components/Articles';\nimport Article from './components/Article';\n\n\nconst App = () => {\n    \n    const [flashMessage, setFlashMessage] = React.useState([]);\n    const [user, setUser] = React.useState(null);\n    const [articles, setArticles] = React.useState([]);\n    const [selectedArticle, setSelectedArticle] = React.useState(null);\n    const [comments, setComments] = React.useState([]);\n\n    React.useEffect(() => {\n        setUser(controller.getUser());\n    }, []);\n\n    React.useEffect(() => {\n        controller.getArticle(setArticles, selectedArticle, setComments);\n    }, [flashMessage, selectedArticle]);\n\n    const login = () => {\n        controller.login(setUser, setFlashMessage);\n    }\n\n    const logout = () => {\n        controller.logout(setUser, setFlashMessage);  \n    }\n\n    const articlePost = () => {\n        controller.postArticle(user, setFlashMessage);\n    }\n\n    const toArticle = (article) => {\n        controller.selectArticle(article, setSelectedArticle, setComments);\n    }\n\n    const deletePost = (nanoID) => {\n        controller.deleteArticle(nanoID, setFlashMessage, setSelectedArticle);\n    }\n\n    const addComment = (articleID) => {\n        controller.postComment(articleID, user, setFlashMessage);\n    }\n\n    return(\n        <div className=\"container\" >\n            <div className=\"row\">\n                {flashMessage[0]===\"\"? null : <div className={`alert alert-${flashMessage[1]} mt-3`}>{flashMessage[0]}</div> }\n            </div>\n            <div className=\"row\">\n                <div className=\"col\" style={{maxWidth: \"400px\"}}>\n                    <User login={login} logout={logout} user={user} />\n                </div>\n                <div className=\"col\">\n                    <Articles articles={articles} user={user} articlePost={articlePost} toArticle={toArticle} deletePost={deletePost}  />\n                </div>\n                <div className=\"col\">\n                    { selectedArticle === null ? null : <Article article={selectedArticle} comments={comments} addComment={addComment} />}\n                </div>\n            </div>\n        </div>\n    );\n}\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}