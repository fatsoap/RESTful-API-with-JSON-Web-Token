(this.webpackJsonpjwt_blog=this.webpackJsonpjwt_blog||[]).push([[0],{1465:function(e,t,a){"use strict";a.r(t);var c=a(5),s=a(1),n=a.n(s),i=a(21),l=a.n(i),r=a(4),d=a.n(r),o=a(3),m=a.n(o),j=a(0),b=function(e){var t=e.login,a=e.logout,c=e.user;return""!==c.name?Object(j.jsx)("div",{className:"mt-3",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("img",{alt:"user_img",src:c.avatar}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:"card-title",children:c.name}),Object(j.jsx)("div",{className:"card-text",children:c.description})]}),Object(j.jsx)("button",{className:"btn btn-primary",onClick:function(){a({name:"",avatar:"",description:""})},children:"Logout"})]})}):Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("button",{className:"btn btn-primary",onClick:function(){var e=m.a.name.firstName()+" "+m.a.name.lastName(),a=m.a.image.people()+"?random="+Date.now(),c=m.a.lorem.sentence();t({name:e,avatar:a,description:c})},children:"Login"})})},u=function(e){var t=e.articlePost,a=e.user,c=e.articles,s=e.toArticle,n=e.deletePost;return Object(j.jsxs)("div",{className:"mt-3",children:[Object(j.jsx)("div",{className:"mb-3",children:Object(j.jsx)("button",{className:"btn btn-primary",onClick:function(){var e={title:m.a.lorem.sentence(),author:a.name,description:m.a.lorem.paragraph(),content:m.a.lorem.paragraphs(),comment:0,like:0,dislike:0};t(e)},children:"New Post"})}),Object(j.jsx)("div",{className:"mb-3",children:c.map((function(e){return Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"card-title",children:["Title : ",e.title]}),Object(j.jsxs)("div",{className:"card-text",children:["Date : ",e.date]}),Object(j.jsxs)("div",{className:"card-text",children:["Author : ",e.author]}),Object(j.jsxs)("div",{className:"card-text",children:["Description : ",e.description]}),Object(j.jsxs)("div",{className:"card-text",children:["Comment : ",e.comment," Like : ",e.like," Dislike : ",e.dislike]}),Object(j.jsx)("div",{className:"btn btn-success mt-3",onClick:function(){s(e)},children:" Read "}),Object(j.jsx)("div",{className:"btn btn-danger mt-3",onClick:function(){n(e.nanoID)},children:" Delete "})]})},e.nanoID)}))})]})},h=function(e){var t=e.comments,a=e.article,c=e.addComment;return Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("h1",{className:"mt-3 mb-3",children:"Selected Article"}),Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"card-title",children:["Title : ",a.title]}),Object(j.jsxs)("div",{className:"card-text mt-1",children:["Date : ",a.date]}),Object(j.jsxs)("div",{className:"card-text mt-1",children:["Author : ",a.author]}),Object(j.jsxs)("div",{className:"card-text mt-3",children:["Content : ",a.content]}),Object(j.jsx)("div",{className:"card-text"}),Object(j.jsx)("div",{className:"btn btn-success mt-3 mb-3",onClick:function(){c(a.nanoID)},children:"Add comment"}),t.map((function(e){return Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"card-title",children:["Author : ",e.author]}),Object(j.jsxs)("div",{className:"card-text",children:["Date: ",e.date]}),e.like?Object(j.jsx)("div",{className:"card-text",children:"LIKE"}):Object(j.jsx)("div",{className:"card-text",children:"DISLIKE"}),Object(j.jsxs)("div",{className:"card-text",children:["Comment : ",e.comment]})]})},e.nanoID)}))]})})]})},x=function(){var e=n.a.useState(null),t=Object(c.a)(e,2),a=t[0],i=t[1],l=n.a.useState([]),r=Object(c.a)(l,2),o=r[0],x=r[1],O=n.a.useState({name:"",avatar:"",description:""}),v=Object(c.a)(O,2),N=v[0],p=v[1],f=n.a.useState([]),g=Object(c.a)(f,2),k=g[0],D=g[1],I=n.a.useState(null),y=Object(c.a)(I,2),S=y[0],C=y[1],w=n.a.useState([]),A=Object(c.a)(w,2),M=A[0],E=A[1];n.a.useEffect((function(){null!==localStorage.getItem("token")&&i(localStorage.getItem("token"))}),[]);Object(s.useEffect)((function(){d.a.get("/api/article").then((function(e){"success"===e.data.type&&D(e.data.articles)})),null!==S&&d.a.get("/api/comment/".concat(S.nanoID)).then((function(e){E(e.data.comments)}))}),[o]);return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"row",children:""===o[0]?null:Object(j.jsx)("div",{className:"alert alert-".concat(o[1]," mt-3"),children:o[0]})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",style:{maxWidth:"400px"},children:Object(j.jsx)(b,{login:function(e){p(e),d.a.post("/api/user",{user:e}).then((function(e){i(e.data.token),localStorage.setItem("token",a),x([e.data.flashMessage,e.data.type])}))},logout:function(e){p(e),localStorage.setItem("token",null),i(null),d.a.post("/api/user?_method=delete").then((function(e){x([e.data.flashMessage,e.data.type])}))},user:N})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)(u,{articles:k,user:N,articlePost:function(e){d.a.post("/api/article",{article:e,token:a}).then((function(e){x([e.data.flashMessage,e.data.type])}))},toArticle:function(e){C(e),d.a.get("/api/comment/".concat(e.nanoID)).then((function(e){console.log(e.data.comments),E(e.data.comments)}))},deletePost:function(e){d.a.post("/api/article?_method=delete",{nanoID:e,token:a}).then((function(e){x([e.data.flashMessage,e.data.type]),C(null)}))}})}),Object(j.jsx)("div",{className:"col",children:null===S?null:Object(j.jsx)(h,{article:S,comments:M,addComment:function(e){var t={articleID:e,comment:m.a.lorem.sentence(),author:N.author,like:Math.random()<.5};d.a.post("/api/comment",{comment:t,token:a}).then((function(e){x([e.data.flashMessage,e.data.type])}))}})})]})]})};l.a.render(Object(j.jsx)(x,{}),document.getElementById("root"))}},[[1465,1,2]]]);
//# sourceMappingURL=main.27d21a44.chunk.js.map